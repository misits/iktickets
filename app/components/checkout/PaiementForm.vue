<template>
    <div class="iktickets-payment">
        <div>
            <div class="iktickets-payment-container hidden-form"></div>
            <div class="iktickets-payments-methods">
                <button
                    class="iktickets-payment-type--disable iktickets-payment-type iktickets-payment-type--postfinance">
                    <svg width="150" height="54" viewBox="0 0 150 54" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M0 0.00411974H150V53.7539H0V0.00411974Z" fill="#FDD205" />
                        <mask id="mask0_322_3" style="mask-type:luminance" maskUnits="userSpaceOnUse" x="0" y="0"
                            width="150" height="54">
                            <path d="M0.00732422 53.748H150V7.16998e-05H0.00732422V53.748Z" fill="white" />
                        </mask>
                        <g mask="url(#mask0_322_3)">
                            <path
                                d="M25.0298 16.9501H26.0031C27.3908 16.9501 28.6409 16.4924 28.6409 14.8859C28.6409 13.2793 27.4306 12.7221 26.0031 12.7221H25.0298V16.9501ZM22.251 10.5403H25.7643C28.7802 10.5403 31.5391 11.4141 31.5391 14.7267C31.5391 17.9614 29.1764 19.1337 26.2003 19.1337H25.0298V24.3911H22.251V10.5403Z"
                                fill="#231F20" />
                            <path
                                d="M37.4716 22.5655C39.5159 22.5655 40.0514 20.7383 40.0514 19.034C40.0514 17.4655 39.2174 15.9965 37.4716 15.9965C35.7439 15.9965 34.9117 17.5053 34.9117 19.034C34.9117 20.7202 35.4472 22.5655 37.4716 22.5655ZM37.4716 13.9323C40.5074 13.9323 42.8303 15.9766 42.8303 19.3506C42.8303 22.2869 40.8656 24.6279 37.4716 24.6279C34.0975 24.6279 32.1328 22.2869 32.1328 19.3506C32.1328 15.9766 34.4558 13.9323 37.4716 13.9323Z"
                                fill="#231F20" />
                            <path
                                d="M50.9852 16.3146C50.1729 16.0378 49.5759 15.8786 48.6044 15.8786C47.8897 15.8786 47.0358 16.1354 47.0358 17.0093C47.0358 18.6375 51.66 17.6045 51.66 21.2951C51.66 23.6778 49.5361 24.6294 47.3741 24.6294C46.361 24.6294 45.3298 24.4521 44.3565 24.1934L44.5157 22.0097C45.3497 22.4277 46.2235 22.6846 47.1353 22.6846C47.8101 22.6846 48.8812 22.4277 48.8812 21.4344C48.8812 19.4299 44.2588 20.7994 44.2588 17.1088C44.2588 14.9052 46.1837 13.9337 48.266 13.9337C49.5162 13.9337 50.3303 14.1327 51.1643 14.31L50.9852 16.3146Z"
                                fill="#231F20" />
                            <path
                                d="M54.299 16.1164H52.3342V14.1715H54.299V12.1272L56.9584 11.2751V14.1715H59.3193V16.1164H56.9584V20.8781C56.9584 21.7519 57.1954 22.566 58.2085 22.566C58.6843 22.566 59.1402 22.4665 59.4188 22.2874L59.4984 24.3914C58.943 24.5506 58.3261 24.6284 57.5337 24.6284C55.4496 24.6284 54.299 23.3403 54.299 21.3159V16.1164Z"
                                fill="#231F20" />
                            <path
                                d="M61.0854 10.5403H68.7852V12.7239H63.8643V16.136H68.5464V18.3178H63.8643V24.3911H61.0854V10.5403Z"
                                fill="#231F20" />
                            <path
                                d="M70.5315 14.1712H73.1909V24.3911H70.5315V14.1712ZM70.5315 9.76594H73.1909V12.306H70.5315V9.76594Z"
                                fill="#231F20" />
                            <path
                                d="M75.9883 14.1712H78.5084V15.5607H78.5482C79.3822 14.3901 80.5111 13.9324 81.9024 13.9324C84.3212 13.9324 85.3741 15.6403 85.3741 17.9415V24.3911H82.7147V18.9329C82.7147 17.6828 82.6948 15.9967 80.9888 15.9967C79.062 15.9967 78.6459 18.0808 78.6459 19.3906V24.3911H75.9883V14.1712Z"
                                fill="#231F20" />
                            <path
                                d="M91.486 22.6846C92.2983 22.6846 92.9352 22.3282 93.3513 21.7709C93.7873 21.1956 93.9067 20.4629 93.9067 19.6687H92.7561C91.5656 19.6687 89.7999 19.8659 89.7999 21.4344C89.7999 22.3083 90.5344 22.6846 91.486 22.6846ZM88.3707 14.708C89.4019 14.2304 90.7913 13.9337 91.922 13.9337C95.0374 13.9337 96.3273 15.2236 96.3273 18.2395V19.5475C96.3273 20.5805 96.3472 21.3548 96.3671 22.1093C96.387 22.8836 96.4268 23.5982 96.4865 24.3906H94.1455C94.046 23.8551 94.046 23.1803 94.0261 22.8637H93.9863C93.3712 23.9944 92.0414 24.6294 90.8311 24.6294C89.0238 24.6294 87.2581 23.5367 87.2581 21.5918C87.2581 20.0649 87.9926 19.1712 89.0057 18.6755C90.017 18.1798 91.3268 18.0803 92.4376 18.0803H93.9067C93.9067 16.434 93.1722 15.8786 91.6054 15.8786C90.4729 15.8786 89.3422 16.3146 88.4503 16.9894L88.3707 14.708Z"
                                fill="#231F20" />
                            <path
                                d="M98.9463 14.1712H101.466V15.5607H101.506C102.34 14.3901 103.471 13.9324 104.86 13.9324C107.281 13.9324 108.332 15.6403 108.332 17.9415V24.3911H105.675V18.9329C105.675 17.6828 105.653 15.9967 103.947 15.9967C102.022 15.9967 101.606 18.0808 101.606 19.3906V24.3911H98.9463V14.1712Z"
                                fill="#231F20" />
                            <path
                                d="M117.7 16.3746C117.222 16.1557 116.708 15.9965 115.892 15.9965C114.246 15.9965 113.195 17.3063 113.195 19.2312C113.195 21.1164 114.087 22.5655 115.954 22.5655C116.708 22.5655 117.54 22.2869 117.996 22.0879L118.118 24.2932C117.341 24.5302 116.549 24.6279 115.456 24.6279C112.102 24.6279 110.416 22.3466 110.416 19.2312C110.416 16.2751 112.164 13.9341 115.357 13.9341C116.43 13.9341 117.204 14.0517 117.938 14.2706L117.7 16.3746Z"
                                fill="#231F20" />
                            <path
                                d="M126.092 18.2793C126.012 16.9894 125.419 15.8786 123.93 15.8786C122.441 15.8786 121.687 16.9098 121.569 18.2793H126.092ZM127.878 23.8153C126.906 24.3508 125.795 24.6294 124.366 24.6294C120.994 24.6294 119.027 22.6846 119.027 19.3322C119.027 16.3743 120.596 13.9337 123.771 13.9337C127.561 13.9337 128.632 16.5335 128.632 20.1047H121.569C121.687 21.7529 122.839 22.6846 124.486 22.6846C125.775 22.6846 126.886 22.2088 127.878 21.6533V23.8153Z"
                                fill="#231F20" />
                            <path
                                d="M133.029 29.2195H139.779L138.711 34.2236H143.717L142.4 40.505L137.414 40.5032L136.421 45.1997H130.91L131.247 43.5769H135.079L136.05 38.9147L141.067 38.9256L141.722 35.812H136.703L137.736 30.8369L134.368 30.8351L133.327 35.812H131.625L133.029 29.2195Z"
                                fill="#ED1C24" />
                            <path d="M128.884 45.2007L129.765 41.0776H82.4852L81.5879 45.2007H128.884Z" fill="white" />
                            <path
                                d="M105.837 35.8118H106.271C106.627 35.8118 106.96 35.942 107.185 36.1663C107.396 36.3762 107.505 36.6584 107.505 36.9823C107.505 37.9158 106.615 38.4187 105.779 38.4187H105.307L105.837 35.8118ZM105.781 34.4042H104.444H104.393H104.38L104.377 34.4187L104.366 34.4676L102.687 42.388L102.671 42.4622L102.665 42.4839H102.691H102.765H104.351H104.402H104.418L104.42 42.4694L104.431 42.4224C104.431 42.4224 104.967 39.9873 105.001 39.8281H105.857C106.917 39.8281 107.886 39.4662 108.516 38.8385C109.044 38.3102 109.321 37.61 109.321 36.8122C109.321 36.1881 109.126 35.6724 108.735 35.2835C108.01 34.5562 106.729 34.4042 105.781 34.4042Z"
                                fill="#231F20" />
                            <path
                                d="M112.823 41.2411C112.384 41.2411 112.022 41.1018 111.751 40.8286C111.418 40.4975 111.233 39.9783 111.233 39.3686C111.233 38.2469 111.678 37.0782 112.366 36.3889C112.822 35.9348 113.357 35.7033 113.958 35.7033C114.41 35.7033 114.781 35.8444 115.059 36.123C115.389 36.4504 115.57 36.9642 115.57 37.5631C115.57 39.0665 114.591 41.2411 112.823 41.2411ZM116.485 35.1768C115.901 34.5925 115.067 34.2958 114.003 34.2958C112.597 34.2958 111.606 34.7462 110.685 35.7973C109.867 36.7544 109.417 37.9882 109.417 39.2781C109.417 40.284 109.751 41.1723 110.358 41.7784C110.927 42.3483 111.709 42.6504 112.619 42.6504C114.057 42.6504 115.239 42.18 116.036 41.2953C116.907 40.3202 117.384 39.0556 117.384 37.7349C117.384 36.635 117.084 35.7738 116.485 35.1768Z"
                                fill="#231F20" />
                            <path
                                d="M86.5527 35.8116H86.6594C87.5459 35.8025 88.1881 35.9961 88.5662 36.3833C88.8575 36.6836 88.9932 37.1033 88.9751 37.6352C88.881 40.0142 87.8896 41.078 85.7548 41.078H85.4509L86.5527 35.8116ZM87.175 34.4041H85.1596H85.109H85.0945L85.0909 34.4185L85.0818 34.4674L83.412 42.3878L83.3975 42.462L83.3921 42.4837H83.4156H83.4898H86.1583C87.763 42.4946 88.9824 41.9952 89.7748 41.002C90.5165 40.0775 90.7264 38.9179 90.7716 38.1092C90.9019 35.8188 89.6933 34.5723 87.175 34.4041Z"
                                fill="#231F20" />
                            <path
                                d="M123.393 34.6522C122.805 34.4133 122.105 34.2958 121.31 34.2958C119.912 34.2958 118.278 34.9434 118.278 36.7689C118.278 37.9737 119.123 38.4459 119.867 38.862C120.465 39.1967 120.979 39.4844 120.979 40.0832C120.979 40.8829 120.263 41.2411 119.552 41.2411C118.863 41.2411 118.204 40.9625 117.643 40.7037L117.58 40.6748L117.56 40.6639L117.553 40.6857L117.533 40.7508L117.126 42.104L117.11 42.1583L117.102 42.1764L117.12 42.1818L117.175 42.2017C117.987 42.4984 118.756 42.6504 119.46 42.6504C120.617 42.6504 121.533 42.3446 122.106 41.7711C122.564 41.3134 122.796 40.6911 122.796 39.9258C122.796 38.6287 121.873 38.0841 121.133 37.6463C120.576 37.317 120.096 37.0348 120.096 36.5319C120.096 36.3401 120.162 36.1773 120.292 36.047C120.612 35.7286 121.176 35.7033 121.343 35.7033C121.869 35.7033 122.457 35.848 122.953 36.1031L123.018 36.1375L123.04 36.1465L123.045 36.1248L123.065 36.0542L123.442 34.748L123.456 34.6974L123.46 34.6793L123.445 34.6721L123.393 34.6522Z"
                                fill="#231F20" />
                            <path
                                d="M100.71 34.4049H96.0483H95.9976H95.9832L95.9796 34.4212L95.9687 34.4682L94.3007 42.3904L94.2862 42.4628L94.2808 42.4863H94.3043H94.3785H99.1003H99.1492H99.1636L99.1673 42.47L99.1781 42.423L99.4495 41.1747L99.4676 41.1023L99.4712 41.077H99.4477H99.3717H96.3378L96.7683 39.0128H99.4857H99.5363H99.5508L99.5544 38.9983L99.5635 38.9494L99.8131 37.7011L99.8294 37.6288L99.8312 37.6053H99.8095H99.7353H97.0632L97.4395 35.8142H100.472H100.522H100.539L100.542 35.7979L100.551 35.7473L100.79 34.4989L100.803 34.4284L100.806 34.4049H100.785H100.71Z"
                                fill="#231F20" />
                            <path
                                d="M94.5126 34.4269L94.518 34.4052H94.4945H94.4203H92.7631H92.7125H92.6962L92.6926 34.4197L92.6853 34.4667L91.0155 42.389L91.001 42.4632L90.9956 42.4849H91.0191H91.0933H92.7505H92.8011H92.8156L92.8174 42.4686L92.8301 42.4215L94.4963 34.4993L94.5126 34.4269Z"
                                fill="#231F20" />
                            <path
                                d="M130.194 34.4042H130.118H124.003H123.954H123.938L123.934 34.4187L123.923 34.4657L123.652 35.7141L123.635 35.7882L123.632 35.8118H123.655H123.73H125.866L124.446 42.388L124.43 42.4604L124.424 42.4839H124.448H124.524H126.179H126.23H126.246V42.4694L126.259 42.4224C126.259 42.4224 127.619 36.1302 127.688 35.8118H129.857H129.908H129.92L129.926 35.7955L129.937 35.7466L130.197 34.5001L130.212 34.4259L130.217 34.4042H130.194Z"
                                fill="#231F20" />
                        </g>
                    </svg>
                </button>
                <a href="#" class="iktickets-payment-type--disable iktickets-payment-type iktickets-payment-type--twint">
                    <svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 140 46">
                        <title>twint-logo</title>
                        <desc>Created with Sketch.</desc>
                        <rect width="100% " height="100% " fill="#000000" />
                        <defs>
                            <radialGradient cx="22.45%" cy="8.76%" fx="22.45%" fy="8.76%" r="113.287%" id="a">
                                <stop stop-color="#fc0" offset="0%" />
                                <stop stop-color="#FFC800" offset="9.157%" />
                                <stop stop-color="#FFBD00" offset="17.39%" />
                                <stop stop-color="#FFAB00" offset="25.28%" />
                                <stop stop-color="#FF9100" offset="32.95%" />
                                <stop stop-color="#FF7000" offset="40.46%" />
                                <stop stop-color="#FF4700" offset="47.86%" />
                                <stop stop-color="#FF1800" offset="55.03%" />
                                <stop stop-color="#f00" offset="58.22%" />
                                <stop stop-color="#f00" offset="100%" />
                            </radialGradient>
                            <radialGradient cx="2.431%" cy="14.525%" fx="2.431%" fy="14.525%" r="139.175%" id="b">
                                <stop stop-color="#00B4E6" offset="0%" />
                                <stop stop-color="#00B0E3" offset="20.1%" />
                                <stop stop-color="#01A5DB" offset="38.98%" />
                                <stop stop-color="#0292CD" offset="57.37%" />
                                <stop stop-color="#0377BA" offset="75.46%" />
                                <stop stop-color="#0455A1" offset="93.16%" />
                                <stop stop-color="#054696" offset="100%" />
                            </radialGradient>
                        </defs>
                        <g fill="none">
                            <path
                                d="M39.902 33.438c0 .59-.418 1.304-.933 1.599l-18.028 10.428c-.516.295-1.351.295-1.867 0l-18.028-10.428c-.516-.295-.933-1.008-.933-1.599v-20.856c0-.59.418-1.304.933-1.599l18.028-10.428c.516-.295 1.351-.295 1.867 0l18.028 10.428c.516.295.933 1.008.933 1.599v20.856zM139.989 14.082h-16.137v3.861h5.796v16.503h4.568v-16.503h5.772zM66.674 14.082h-16.161v3.861h5.796v16.503h4.568v-16.503h5.796zM113.389 13.443c-5.084 0-7.909 3.246-7.909 7.944v13.06h4.519v-13.158c0-2.041 1.204-3.615 3.439-3.615 2.235 0 3.414 1.869 3.414 3.615v13.158h4.519v-13.06c.025-4.698-2.898-7.944-7.982-7.944zM96.344 14.082v20.364h4.519v-20.364zM81.018 22.149l.147.91 4.249 11.387h1.842l5.772-20.364h-4.446l-2.751 10.699-.172 1.156-.221-1.156-3.684-10.699h-1.474l-3.684 10.699-.221 1.156-.147-1.156-2.751-10.699h-4.47l5.772 20.364h1.842l4.249-11.387.147-.91"
                                id="Shape1" fill="#fff" />
                            <path
                                d="M29.414 23.059l-4.716 6.911-2.407-3.689 2.775-4.156c.516-.738 1.621-2.779.344-5.558-1.032-2.263-3.267-3.345-5.232-3.345-1.965 0-4.102 1.008-5.256 3.345-1.302 2.681-.172 4.771.319 5.485 0 0 1.547 2.263 2.825 4.181l2.088 3.025 3.144 4.821c.025.025.516.787 1.4.787.835 0 1.351-.762 1.425-.836l7.368-10.92h-4.077v-.049zm-9.26.172s-1.228-1.869-2.039-3.173c-.86-1.402.098-3.492 2.039-3.492 1.94 0 2.898 2.091 2.039 3.492-.786 1.304-2.039 3.173-2.039 3.173z"
                                id="Shape2" fill="url(#a)" />
                            <path
                                d="M15.635 29.749l-4.618-6.493s-1.228-1.869-2.039-3.173c-.86-1.402.098-3.492 2.039-3.492.246 0 .467.025.688.098l1.621-2.976c-.737-.32-1.547-.492-2.284-.492-1.965 0-4.102 1.008-5.256 3.345-1.302 2.681-.172 4.771.319 5.485l8.081 11.978c.074.098.589.861 1.449.861.86 0 1.351-.738 1.425-.836l2.432-3.714-2.088-3.074-1.768 2.484z"
                                fill="url(#b)" />
                        </g>
                    </svg>
                </a>
                <a href="#" class="iktickets-payment-type--disable iktickets-payment-type iktickets-payment-type--card">
                    <svg width="150" height="150" viewBox="0 0 150 150" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <mask id="mask0_325_81" style="mask-type:luminance" maskUnits="userSpaceOnUse" x="21" y="27"
                            width="108" height="35">
                            <path
                                d="M76.8338 38.1452C76.7722 43.0014 81.1617 45.7116 84.4683 47.3228C87.8657 48.9761 89.0068 50.0361 88.9939 51.5144C88.9679 53.7772 86.2837 54.7757 83.7713 54.8146C79.3884 54.8827 76.8403 53.6313 74.8142 52.6847L73.2354 60.0728C75.268 61.0097 79.0318 61.8266 82.9349 61.8623C92.0963 61.8623 98.0904 57.34 98.1228 50.3279C98.1585 41.4291 85.8137 40.9364 85.898 36.9587C85.9271 35.7527 87.078 34.4657 89.6001 34.1383C90.8482 33.9729 94.2943 33.8465 98.2007 35.6457L99.734 28.4975C97.6333 27.7324 94.9329 26.9998 91.5711 26.9998C82.9479 26.9998 76.8825 31.5837 76.8338 38.1452ZM114.468 27.6157C112.795 27.6157 111.385 28.5915 110.756 30.0893L97.669 61.3371H106.824L108.646 56.3026H119.833L120.89 61.3371H128.959L121.918 27.6157H114.468ZM115.749 36.7252L118.391 49.3878H111.155L115.749 36.7252ZM65.7338 27.6157L58.5175 61.3371H67.2413L74.4543 27.6157H65.7338ZM52.8282 27.6157L43.7478 50.5678L40.0749 31.0521C39.6437 28.8736 37.9418 27.6157 36.0518 27.6157H21.2075L21 28.5948C24.0473 29.2561 27.5096 30.3227 29.607 31.4638C30.8908 32.1608 31.2571 32.7702 31.6785 34.4268L38.6355 61.3371H47.8552L61.9895 27.6157H52.8282Z"
                                fill="white" />
                        </mask>
                        <g mask="url(#mask0_325_81)">
                            <path d="M9.69458 31.1635L116.066 -8.01066L140.265 57.6999L33.8947 96.874"
                                fill="url(#paint0_linear_325_81)" />
                        </g>
                        <path d="M62.2056 80.3213H86.8051V120.674H62.2056V80.3213Z" fill="#FF5F00" />
                        <path
                            d="M64.7392 100.501C64.7361 96.6157 65.6132 92.7803 67.3039 89.2854C68.9946 85.7904 71.4548 82.7275 74.4981 80.3285C70.7288 77.3533 66.2021 75.5032 61.4354 74.9897C56.6687 74.4761 51.8542 75.3198 47.5424 77.4243C43.2305 79.5289 39.5952 82.8093 37.0518 86.8908C34.5084 90.9722 33.1597 95.69 33.1597 100.505C33.1597 105.32 34.5084 110.038 37.0518 114.119C39.5952 118.2 43.2305 121.481 47.5424 123.585C51.8542 125.69 56.6687 126.534 61.4354 126.02C66.2021 125.507 70.7288 123.656 74.4981 120.681C71.4538 118.281 68.9931 115.217 67.3023 111.721C65.6116 108.225 64.7351 104.388 64.7392 100.501V100.501Z"
                            fill="#EB001B" />
                        <path
                            d="M113.399 116.405V115.578H113.754V115.407H112.909V115.578H113.243V116.405L113.399 116.405ZM115.038 116.405V115.407H114.783L114.485 116.12L114.187 115.407H113.931V116.405H114.116V115.649L114.393 116.298H114.584L114.861 115.649V116.405H115.038Z"
                            fill="#F79E1B" />
                        <path
                            d="M115.84 100.502C115.84 105.317 114.491 110.035 111.947 114.117C109.403 118.198 105.768 121.479 101.455 123.583C97.1427 125.687 92.3278 126.53 87.5608 126.016C82.7938 125.502 78.2671 123.651 74.498 120.675C77.5402 118.273 79.9996 115.21 81.6908 111.715C83.3819 108.219 84.2607 104.384 84.2607 100.498C84.2607 96.6122 83.3819 92.7769 81.6908 89.2818C79.9996 85.7867 77.5402 82.7229 74.498 80.3217C78.2671 77.3456 82.7938 75.4946 87.5609 74.9803C92.3279 74.466 97.1428 75.3092 101.455 77.4134C105.768 79.5176 109.404 82.7981 111.947 86.8797C114.491 90.9613 115.84 95.6794 115.84 100.495V100.502Z"
                            fill="#F79E1B" />
                        <defs>
                            <linearGradient id="paint0_linear_325_81" x1="30.7793" y1="60.8028" x2="121.766" y2="27.2939"
                                gradientUnits="userSpaceOnUse">
                                <stop stop-color="#222357" />
                                <stop offset="1" stop-color="#254AA5" />
                            </linearGradient>
                        </defs>
                    </svg>
                </a>
            </div>
        </div>
    </div>
</template>

<script setup>
import router from '../../router/routes';
import { useCartStore } from '../../stores/cart';
import { onMounted, ref, watch } from 'vue';

const cartStore = useCartStore();
const cartReady = ref(false);

if (cartStore.getCartSize === 0) {
    router.push({ name: 'cart' });
}

cartStore.setPaimentsUrls();

watch(
  () => cartStore.getUrls, // What to watch
  (newVal) => {
    if (newVal && Object.keys(newVal).length > 0) {
      const container = document.querySelector(
            `.iktickets-payment-container`
        );

        for (const [key, value] of Object.entries(cartStore.getUrls)) {
            const paymentOption = document.querySelector(
                `.iktickets-payment-type--${key}`
            );
            if (paymentOption) {
                if (typeof (value) === "string") {
                    paymentOption.classList.remove(
                        "iktickets-payment-type--disable"
                    );
                    if (key === "postfinance") {
                        // add from string to html
                        container.innerHTML = value;
                    } else {
                        // add url
                        paymentOption.href = value;
                    }
                }
            }
        }

        // on click payment method 'postfinance' submit form
        const postfinance = document.querySelector(
            `.iktickets-payment-type--postfinance`
        );

        if (postfinance) {
            postfinance.addEventListener("click", (e) => {
                e.preventDefault();
                const form = document.querySelector(
                    `.iktickets-payment-container form`
                );
                if (form) {
                    form.submit();
                }
            });
        }

      cartReady.value = true;
    } else {
      cartReady.value = false;
    }
  },
  { immediate: true } // Run watcher immediately upon creation
);

</script>

<style lang="scss">
.iktickets-payment {
    .iktickets-payments-methods {
        display: flex;
        margin-top: var(--iktickets-sp-lg);

        button {
            // reset button
            border: none;
            padding: 0;
            cursor: pointer;
        }
    }

    .iktickets-payment-container {
        &.hidden-form {
            display: none;
        }
    }

    .iktickets-payment-type {
        height: 150px;
        width: 150px;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-right: var(--iktickets-sp-md);

        &--disable {
            opacity: 0.3;
            pointer-events: none;
            cursor: not-allowed;
        }

        &:last-child {
            margin-right: 0;
        }

        @media (max-width: 768px) {
            height: 100px;
            width: 100px;
        }

        &--twint {
            background-color: #000;

            padding: var(--iktickets-sp-md);
        }

        &--postfinance {
            background-color: #fcd205;
        }

        &--card {
            background-color: var(--iktickets-color-grey-lighter);
        }
    }
}
</style>